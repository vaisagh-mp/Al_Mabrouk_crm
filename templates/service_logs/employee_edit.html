{% extends "Employee/employeebase.html" %}
{% block content %}

<div class="pg-title">
    <h1>Edit Service Log</h1>
</div>

<div class="widget-box">

    <form method="post" class="wrk-rprt-frm">
        {% csrf_token %}

        <div class="grid-2">
            <div>
                <label>Date</label>
                <input type="date"
                       name="date"
                       value="{{ log.date|date:'Y-m-d' }}"
                       required>
            </div>

            <div>
                <label>Project</label>
                <input type="text"
                       value="{{ log.project.name }}"
                       disabled
                       class="readonly-field">
                <input type="hidden" name="project" value="{{ log.project.id }}">
            </div>
        </div>

        <div class="grid-2">
            <div>
                <label>Vessel Name</label>
                <input type="text"
                       name="vessel_name"
                       value="{{ log.vessel_name }}"
                       required>
            </div>

            <div>
                <label>Port</label>
                <input type="text"
                       name="port"
                       value="{{ log.port }}"
                       required>
            </div>
        </div>

        <div class="grid-2">
            <div>
                <label>Service Type</label>
                <select name="service_type">
                    <option value="JOB" {% if log.service_type == "JOB" %}selected{% endif %}>
                        Job
                    </option>
                    <option value="INSPECTION"
                        {% if log.service_type == "INSPECTION" %}selected{% endif %}>
                        Inspection
                    </option>
                </select>
            </div>

            <div>
                <label>Service Reference</label>
                <input type="text"
                       name="service_reference"
                       value="{{ log.service_reference }}">
            </div>
        </div>

        <div class="grid-2">
            <div>
                <label>Start Time</label>
                <input type="time"
                       name="start_time"
                       value="{{ log.start_time|time:'H:i' }}"
                       required>
            </div>

            <div>
                <label>End Time</label>
                <input type="time"
                       name="end_time"
                       value="{{ log.end_time|time:'H:i' }}"
                       required>
            </div>
        </div>

        <div class="grid-2">
            <div>
                <label>Location Type</label>
                <select name="location_type">
                    <option value="ANCHORAGE"
                        {% if log.location_type == "ANCHORAGE" %}selected{% endif %}>
                        Anchorage
                    </option>
                    <option value="SAILING"
                        {% if log.location_type == "SAILING" %}selected{% endif %}>
                        Sailing
                    </option>
                </select>
            </div>

            <div style="display:flex;align-items:center;gap:15px;">
                <label>Holiday</label>
                <input type="checkbox"
                       name="is_holiday"
                       {% if log.is_holiday %}checked{% endif %}
                       style="width: unset;">
            </div>
        </div>

        <div style="margin-top: 25px; display:flex; gap:10px;">
            <button type="submit" class="prmry-btn">
                Update Log
            </button>

            <a href="{% url 'service_log_list' %}" class="btn btn-secondary">
                Cancel
            </a>
        </div>

    </form>

</div>

<style>
.readonly-field {
    background: #f9fafb;
    color: #6b7280;
    cursor: not-allowed;
}
</style>

{% endblock %}
